# =============================================================================
# Production Configuration
# =============================================================================
# Used by: docker compose (prod mode) and VPS deployment
# Usage:   ./scripts/start.sh --prod
#
# ⚠️  IMPORTANT: Update ALL passwords and secrets before deploying!

NODE_ENV=production

# ─── Ports ───────────────────────────────────────────────────────────────────
# Host ports (mapped from container → host)
DB_PORT=5436
DB_REPLICA_PORT=5437
REDIS_EXTERNAL_PORT=6381
API_EXTERNAL_PORT=3002
BROWSER_SERVICE_EXTERNAL_PORT=3003

# Internal container ports
API_PORT=3000
REDIS_PORT=6379
BROWSER_SERVICE_PORT=3001

# ─── Database (Primary) ─────────────────────────────────────────────────────
POSTGRES_USER=catchy_admin
POSTGRES_PASSWORD=C@tchy_Pr0d_2026!xK9m
POSTGRES_DB=catchy_production

# ─── Database (Replica) ─────────────────────────────────────────────────────
REPLICATOR_USER=replicator
REPLICATOR_PASSWORD=R3pl!c@t0r_Pr0d_2026#sZq
PRIMARY_HOST=db

# Connection URLs (using docker service names)
DATABASE_URL="postgresql://catchy_admin:C@tchy_Pr0d_2026!xK9m@localhost:5436/catchy_production?schema=public"
DATABASE_REPLICA_URL="postgresql://catchy_admin:C@tchy_Pr0d_2026!xK9m@localhost:5437/catchy_production?schema=public"

# ─── Redis ───────────────────────────────────────────────────────────────────
REDIS_HOST=redis

# ─── API ─────────────────────────────────────────────────────────────────────
API_KEY=change-me-to-a-secure-key
JWT_SECRET=change-me-to-a-secure-jwt-secret
SECRET_SALT=change-me-to-a-secure-salt
GEMINI_API_KEY=your_gemini_api_key

# ─── Email ───────────────────────────────────────────────────────────────────
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USER=your_email@example.com
EMAIL_PASS=your_email_app_password

# ─── Worker ──────────────────────────────────────────────────────────────────
WORKER_CONCURRENCY=8

# ─── Browser Service ─────────────────────────────────────────────────────────
BROWSER_SERVICE_HOST=browser-service
BROWSER_SERVICE_API_KEY=internal-service-key
BROWSER_COUNT=2
BROWSER_HEADLESS=true
BROWSER_TIMEOUT_MS=30000

# ─── Proxy ───────────────────────────────────────────────────────────────────
PROXY_PROVIDER=fake
FAKE_PROXY_COST_PER_MB=0.001
FAKE_PROXY_FAILURE_RATE=0.05

GEMINI_API_KEY="AIzaSyBstr0AXZa5LO6Zusz3PDo6-vAjiLuWy4c"